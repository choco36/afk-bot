<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AFK Console PRO</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    input,select,textarea{ color:#111 !important }
    .panel{ border-radius:14px }
    .mcbox{ background:#0e0e0f; color:#d7ffd7; font-family:ui-monospace,Menlo,Consolas,monospace; border-radius:10px; padding:10px; }
    .msg-user{ color:#8ab4ff } .msg-sys{ color:#7dd3fc } .msg-you{ color:#ffd27d }
  </style>
</head>
<body class="bg-neutral-100 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100">
  <div class="max-w-6xl mx-auto p-3 space-y-3">

    <!-- Top bar -->
    <div class="panel p-3 border bg-white dark:bg-neutral-900 flex flex-col md:flex-row gap-2 items-stretch">
      <div class="flex-1 flex items-center gap-2">
        <span id="lockDot" class="w-3 h-3 rounded-full bg-red-500"></span>
        <span id="lockText" class="text-sm">מצב: נעול – צריך להזין טוקן</span>
      </div>
      <input id="token" class="px-3 py-2 rounded border flex-1" placeholder="ADMIN_TOKEN" />
      <button id="saveToken" class="px-4 py-2 rounded bg-blue-600 text-white">שמירה</button>
      <a href="./login.html" class="px-4 py-2 rounded border">התחברות</a>
      <button id="stopAll" class="px-4 py-2 rounded bg-red-600 text-white">עצור הכל</button>
    </div>

    <div id="authBanner" class="max-w-6xl mx-auto hidden"><div class="m-2 p-3 rounded bg-amber-100 text-amber-900 border border-amber-300 text-sm">להתחברות מיקרוסופט: יופיע כאן קישור וקוד.</div></div>

    <!-- 3 columns -->
    <div class="grid md:grid-cols-3 gap-3">
      <!-- Accounts (sessions list) -->
      <div class="panel p-3 border bg-white dark:bg-neutral-900">
        <h2 class="font-semibold mb-2">Accounts</h2>
        <div id="sessions" class="space-y-2 max-h-[60vh] overflow-auto"></div>
        <div class="flex gap-2 mt-2">
          <button id="refreshSessions" class="px-3 py-2 rounded border flex-1">רענן</button>
        </div>
      </div>

      <!-- Settings (new session form) -->
      <div class="panel p-3 border bg-white dark:bg-neutral-900">
        <h2 class="font-semibold mb-2">Settings</h2>
        <form id="sessionForm" class="grid gap-2">
          <input id="host" class="px-3 py-2 rounded border" placeholder="play.server.com" required />
          <input id="port" type="number" value="25565" class="px-3 py-2 rounded border" />
          <select id="auth" class="px-3 py-2 rounded border">
            <option value="microsoft">Microsoft (Online)</option>
            <option value="offline">Offline</option>
          </select>
          <input id="username" class="px-3 py-2 rounded border hidden" placeholder="שם משתמש (Offline)" />
          <input id="joinCmd" class="px-3 py-2 rounded border" placeholder="/server survival" />
          <input id="keepAliveCmd" class="px-3 py-2 rounded border" placeholder="/ping" />
          <div class="grid grid-cols-2 gap-2">
            <select id="afkMode" class="px-3 py-2 rounded border">
              <option value="jitter">Jitter</option><option value="circle">Circle</option>
              <option value="strafe">Strafe</option><option value="walkabout">Walkabout</option>
            </select>
            <input id="afkIntervalMs" type="number" value="60000" class="px-3 py-2 rounded border" />
          </div>
          <div class="grid grid-cols-2 gap-2">
            <label class="flex items-center gap-2"><input id="autoReconnect" type="checkbox" checked /> Auto Reconnect</label>
            <input id="reconnectDelayMs" type="number" value="10000" class="px-3 py-2 rounded border" />
          </div>
          <button class="px-4 py-2 rounded bg-blue-600 text-white">התחל סשן</button>
        </form>
      </div>

      <!-- Console (chat) -->
      <div class="panel p-3 border bg-white dark:bg-neutral-900">
        <div class="flex items-center justify-between mb-2">
          <h2 class="font-semibold">Console</h2>
          <select id="chatSession" class="px-3 py-2 rounded border"></select>
        </div>
        <div id="chatBox" class="mcbox max-h-[50vh] overflow-auto"></div>
        <div class="flex gap-2 mt-2">
          <input id="chatInput" class="px-3 py-2 rounded border flex-1" placeholder="כתוב הודעה…" />
          <button id="chatSend" class="px-4 py-2 rounded bg-blue-600 text-white">Send</button>
        </div>
      </div>
    </div>

  </div>
  <script src="./app.js" type="module"></script>

    <!-- Microsoft Login Modal -->
    <div id="msaModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60">
      <div class="w-11/12 max-w-md rounded-xl border bg-white dark:bg-neutral-900 p-4 space-y-3">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold text-lg">Microsoft login</h3>
          <button id="msaClose" class="px-2 py-1 rounded border">×</button>
        </div>
        <div class="text-sm">Step 1: Copy this code</div>
        <div id="msaCode" class="text-2xl font-mono bg-neutral-100 dark:bg-neutral-800 rounded p-2 text-center select-all">—</div>
        <button id="msaCopy" class="w-full px-3 py-2 rounded bg-blue-600 text-white">Copy code</button>
        <div class="text-sm">Step 2: Open Microsoft</div>
        <a id="msaOpen" class="block text-center px-3 py-2 rounded border hover:bg-neutral-100 dark:hover:bg-neutral-800" target="_blank" rel="noopener">Open microsoft.com/link</a>
        <div class="text-sm">Step 3: Paste the code and sign in. Step 4: Close this window.</div>
        <div class="text-xs text-neutral-500">The window will auto-hide after successful login.</div>
      </div>
    </div>
    
</body>
</html>
